<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Pagamento â€¢ 60 Echo Beads</title>
<link rel="icon" type="image/png" href="img/favicon.png">
<script src="https://cdn.tailwindcss.com"></script>

<!-- Mercado Pago SDK -->
<script src="https://sdk.mercadopago.com/js/v2"></script>

<style>
body {
  background: radial-gradient(circle at top, rgba(255,200,0,0.04), transparent 80%), #000;
  font-family: sans-serif;
}
.glass-card {
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,255,0.2);
  box-shadow: 0 8px 32px rgba(0,0,0,0.25);
  padding: 24px;
  color: white;
}
.valor-glow {
  font-size: 1.6rem;
  font-weight: bold;
  color: #FFD700;
  text-shadow: 0 0 8px #FFD700;
}
.btn-comprar {
  background: #FFD700;
  color: #000;
  font-weight: bold;
  padding: 14px;
  border-radius: 14px;
  width: 100%;
  margin-top: 12px;
}
</style>
</head>

<body>

<div class="min-h-screen flex items-center justify-center p-6">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl w-full">

    <div class="glass-card text-center">
      <h1 class="text-2xl font-bold mb-2">ðŸ¦ª 60 Echo Beads</h1>
      <img src="img/echo60.png" class="mx-auto w-32 mb-4">
      <span class="valor-glow">R$ 10,40</span>
    </div>

    <div class="glass-card">
      <h2 class="text-xl font-bold mb-4 text-center">Gateway de Pagamento</h2>
      <button id="pagar" class="btn-comprar">PAGAR COM MERCADO PAGO</button>
    </div>

  </div>
</div>

<script>
const mp = new MercadoPago(
  "APP_USR-8f621d31-733d-4d3b-a22f-25b69490990e",
  { locale: "pt-BR" }
);

document.getElementById("pagar").addEventListener("click", async () => {
  const produto = "60 Echo Beads";
  const valor = 10.40;

  // ðŸ”´ PERSISTE O PRODUTO (ESSENCIAL)
  localStorage.setItem("produto", produto);

  const response = await fetch(
    "https://saint-echo-backend.neuroniosgames.workers.dev/create-payment",
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ produto, valor })
    }
  );

  const data = await response.json();

  if (!data.id) {
    alert("Erro ao criar pagamento.");
    return;
  }

  mp.checkout({
    preference: { id: data.id },
    autoOpen: true
  });
});
</script>

</body>
</html>
